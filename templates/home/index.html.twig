{% extends 'base.html.twig' %}

{% block body %}

{% if not app.user %}
<div class="my-3 d-flex justify-content-between my-5 ">
  <div class="col-6">
    <img src="{{asset('build/images/hero.jpg')}}" class="img-fluid rounded"  width="700" height="500" loading="lazy">
  </div>
  <div class="d-flex flex-column justify-content-center col-5">
    <h1 class="">Fayence Avenir</h1>
    <p class="">Fayence Avenir ambitionne à mobiliser les habitants de notre territoire, encourage l'expression collective et individuelle, et favorise les débats sur des enjeux locaux.</p>
    <p class="">Rejoignez-nous pour partager vos idées et contribuer à construire un avenir meilleur pour notre communauté.</p>
    <div class="d-flex justify-content-center">
      <a href="{{ path('register') }}" class="btn btn-primary me-3">Inscription</a>
      <a href="{{ path('login') }}" class="btn btn-outline-secondary">Connexion</a>
    </div>
  </div>
</div>
{% endif %}

<div class="album py-5 bg-body-tertiary">
  <div class="container">
  <h2 class="text-capitalize text-center my-3">Nos derniers articles</h2>
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
      {% for article in articles %}
      <a href="{{ path('article_show', { id: article.id}) }}">
        <div class="card p-0 shadow" >
          <img src="{{ asset('build/images/eventFayence.jpeg')}}" class="card-img-top" alt="image article {{ article.title }}">
          <div class="card-body">
            <h3 class="card-title">{{ article.title }}</h3>
            <hr class="my-1">
            <div class="d-flex justify-content-center">
              <p class="text-center my-1 bg-primary text-white rounded-pill w-50 shadow">{{ article.category | replace({
                'culture': 'Culture/Animation',
                'societal': 'Sociétal', 
                'environment': 'Environnement', 
                'sport': 'Sport', 
                'energy': 'Energie', 
                'agriculture': 'Agriculture', 
                'tourism': 'Tourisme',
              })}}</p>
            </div>
            <div class="d-flex justify-content-between my-1 align-items-center">
              <p class="small fw-light">Ecrit par <span class="primary-text fw-bold">{{article.author.firstname}} {{article.author.lastname}}</span></p>
              <p class="small fw-light">Le {{ article.createdAt | date('d M Y')}}</p>
            </div>
            <hr class="my-1">
            <p class="card-text">{{ article.content | slice(0, 100) }}...</p>
          </div>
        </div>
      </a>
      {% endfor %}
    </div>
  </div>
</div>

<div class="album py-5 bg-body-tertiary">
  <div class="container">
  <h2 class="text-capitalize text-center my-3">Nos prochaines évènements</h2>
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
      {% for event in events %}
      <a href="{{ path('show_event', { id: event.id}) }}">
        <div class="card p-0 shadow" >
          <img src="{{ asset('build/images/eventFayence.jpeg')}}" class="card-img-top" alt="image event {{ event.name }}">
          <div class="card-body">
            <h3 class="card-title">{{ event.name }}</h3>
            <hr>
            
            <div class="">
              <p class="fs-6 fw-light">Adresse : {{ event.adresse }}</p>
              <p class="fs-6 fw-light">Le {{ event.date | date('d M Y à h:m')}}</p>
            </div>
            <p class="card-text">{{ event.content | slice(0, 100) }}...</p>
          </div>
        </div>
      </a>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}