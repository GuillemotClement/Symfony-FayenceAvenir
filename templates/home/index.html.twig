{% extends 'base.html.twig' %}

{% block body %}
  {% if not app.user %}
  {# <div class=""> #}
    <div class="px-4 py-5 my-5 text-center">
      <h1 class="display-5 fw-bold text-body-emphasis">Fayence Avenir</h1>
      <div class="col-lg-6 mx-auto">
        <p class="lead mb-4">Fayence Avenir ambitionne à mobiliser les habitants de notre territoire, encourage l'expression collective et individuelle, et favorise les débats sur des enjeux locaux.</p>
        <div class="">
          <a href="{{ path('register') }}" class="btn btn-primary btn-lg px-4 me-md-2 mb-3">Inscription</a> 
          <a href="{{ path('login') }}" class="btn btn-outline-secondary btn-lg px-4 mb-3">Connexion</a>
        </div>
      </div>
    </div> 
  {% endif %}
  <div class="album py-5 bg-body-tertiary">
    <div class="container">
    <h2 class="text-capitalize text-center my-3">Nos derniers articles</h2>
      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
        {% for article in articles %}
        <a href="{{ path('article_show', { id: article.id}) }}">
          <div class="card p-0 shadow card-height">
            <img src="{{ asset('build/images/eventFayence.jpeg')}}" class="card-img-top" alt="image article {{ article.title }}">
            <div class="card-body d-flex flex-column justify-content-between">
              <h3 class="card-title">{{ article.title }}</h3>
              <hr class="my-1">
              <div class="d-flex justify-content-center">
                <p class="text-center my-1 bg-primary text-white rounded-pill w-50 shadow">{{ article.category | replace({
                  'culture': 'Culture/Animation',
                  'societal': 'Sociétal', 
                  'environment': 'Environnement', 
                  'sport': 'Sport', 
                  'energy': 'Energie', 
                  'agriculture': 'Agriculture', 
                  'tourism': 'Tourisme',
                })}}</p>
              </div>
              <div class="d-flex justify-content-between my-1 align-items-center">
                <p class="small fw-light">Ecrit par <span class="primary-text fw-bold">{{article.author.firstname}} {{article.author.lastname}}</span></p>
                <p class="small fw-light">Le {{ article.createdAt | date('d M Y')}}</p>
              </div>
              <hr class="my-1">
              <p class="card-text">{{ article.content | slice(0, 100) }}...</p>
            </div>
          </div>
        </a>
        {% endfor %}
      </div>
    </div>
  </div>

  <div class="album py-5 bg-body-tertiary">
    <div class="container">
    <h2 class="text-capitalize text-center my-3">Nos prochaines évènements</h2>
      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
        {% for event in events %}
        <a href="{{ path('show_event', { id: event.id}) }}">
          <div class="card p-0 shadow card-height">
            <img src="{{ asset('build/images/eventFayence.jpeg')}}" class="card-img-top" alt="image event {{ event.name }}">
            <div class="card-body d-flex flex-column justify-content-between">
              <h3 class="card-title">{{ event.name }}</h3>
              <hr>
              <div class="">
                <p class="fs-6 fw-light">Adresse : {{ event.adresse }}</p>
                <p class="fs-6 fw-light">Le {{ event.date | date('d M Y à h:m')}}</p>
              </div>
              <hr>
              <p class="card-text">{{ event.content | slice(0, 100) }}...</p>
            </div>
          </div>
        </a>
        {% endfor %}
      </div>
    </div>
  </div>
{% endblock %}